{"name":"stress","tagline":"HTTP load/traffic generator and benchmark tool built on Node.js","body":"CURRENT STATE\r\n================\r\n\r\nThis is a fork of [benschmaus/nodeload](https://github.com/benschmaus/nodeload). My current vision is to re-release\r\nnodeload as a separate npm module after restructuring for maintainability.\r\n\r\nDocumentation and usage may not be in sync for a while.\r\n\r\nINSTALLING\r\n================\r\n\r\nMake sure [node.js](http://nodejs.org/#download) is installed. Then install `nodeload`:\r\n\r\n1. Using [npm](http://npmjs.org/):\r\n\r\n        curl http://npmjs.org/install.sh | sh       # install npm if not already installed\r\n        npm install nodeload\r\n\r\n2. From source:\r\n\r\n        git clone git://github.com/jimschubert/nodeload.git\r\n        cd nodeload\r\n        npm link    # optional. enables require('nodeload/<module>') instead of require('./lib/<module>').\r\n\r\n3. Or as a single file (this does not install the `stress.js` tool):\r\n\r\n        wget https://github.com/jimschubert/nodeload/raw/master/nodeload.js\r\n\r\nNODELOAD\r\n================\r\n\r\n`nodeload` is a collection of independent [node.js](http://nodejs.org/) modules for load testing HTTP services.\r\n\r\nAs a developer, you should be able to write load tests and get informative reports without having to learn another framework. You should be able to build by example and selectively use the parts of a tool that fit your task. Being a library means that you can use as much or as little of `nodeload` as makes sense, and you can create load tests with the power of a full programming language. For example, if you need to execute some function at a given rate, just use the [`'nodeload/loop'`](https://github.com/jimschubert/nodeload/tree/master/doc/loop.md) module, and write the rest yourself.\r\n\r\nIn addition, `nodeload` is built for operability. It can always be deployed by simply copying the single file, `nodeload.js`.\r\n\r\nLook for examples in the [`examples/`](https://github.com/jimschubert/nodeload/tree/master/examples) directory and in test cases prefixed with \"example\" in [`test/`](https://github.com/jimschubert/nodeload/tree/master/test). Here are simple examples of each module:\r\n\r\n### [stress](https://github.com/jimschubert/nodeload/tree/master/bin/stress.js)\r\n\r\n`stress` is an [Apache Bench (ab)](http://httpd.apache.org/docs/2.0/programs/ab.html) like command line tool for running tests quickly. Run `./bin/stress.js -h` for usage information.\r\n\r\n    $ examples/test-server.js &    # starts a simple server on port 9000 to load test\r\n    $ ./bin/stress.js -c 10 -n 10000 -i 2 localhost:9000\r\n\r\nwill send 10,000 queries to http://localhost:9000 using 10 connections. Statistics are printed to the console and graphs can be seen at <http://localhost:8000/>.\r\n\r\nThanks to Orlando Vazquez ovazquez@gmail.com for the original proof of concept app.\r\n\r\n### [nodeload](https://github.com/jimschubert/nodeload/tree/master/doc/nodeload.md)\r\n\r\nThe `nodeload` module is the primary interface for creating load tests. It includes all the other modules described below, so if you `require('nodeload')`, you don't need to `require()` any of the other ones. Look at the examples in [`examples/loadtesting.ex.js`](https://github.com/jimschubert/nodeload/tree/master/examples/loadtesting.ex.js) and [`examples/riaktest.ex.js`](https://github.com/jimschubert/nodeload/tree/master/examples/riaktest.ex.js) or read the [nodeload module documentation](https://github.com/jimschubert/nodeload/tree/master/doc/nodeload.md).\r\n\r\n    var nl = require('nodeload');\r\n    var loadtest = nl.run({\r\n        host: 'localhost',\r\n        port: 9000,\r\n        timeLimit: 60,\r\n        targetRps: 500,\r\n        requestGenerator: function(client) {\r\n            var request = client.request('GET', \"/\" + Math.floor(Math.random()*10000));\r\n            request.end();\r\n            return request;\r\n        }\r\n    });\r\n    loadtest.on('end', function() { console.log('Load test done.'); });\r\n\r\n### [remote](https://github.com/jimschubert/nodeload/tree/master/doc/remote.md)\r\n\r\nThe `remote` module provides a mechanism for running a distributed load test. See [`examples/remotetesting.ex.js`](https://github.com/jimschubert/nodeload/tree/master/examples/remotetesting.ex.js) and [`examples/remote.ex.js`](https://github.com/jimschubert/nodeload/tree/master/examples/remote.ex.js) for examples or read the [remote module documentation](https://github.com/jimschubert/nodeload/tree/master/doc/remote.md).\r\n\r\nStart slave instances:\r\n\r\n    $ HTTP_PORT=10001 ./nodeload.js  # start a local slave instance on :10001\r\n    $ HTTP_PORT=10002 ./nodeload.js  # start a 2nd slave instance on :10002\r\n    \r\nCreate the distributed load test:\r\n\r\n    var nl = require('nodeload/remote');\r\n    var cluster = new nl.LoadTestCluster('localhost:8000', ['localhost:8002', 'localhost:8001']);\r\n    cluster.run({\r\n        host: 'localhost',\r\n        port: 9000,\r\n        timeLimit: 60,\r\n        targetRps: 500,\r\n        requestGenerator: function(client) {\r\n            var request = client.request('GET', \"/\" + Math.floor(Math.random()*10000));\r\n            request.end();\r\n            return request;\r\n        }\r\n    });\r\n    cluster.on('end', function() { console.log('Load test done.'); });\r\n\r\n### [stats](https://github.com/jimschubert/nodeload/tree/master/doc/stats.md)\r\n\r\nThe `stats` module provides implementations of various statistics objects, like Histograms and Accumulators, and functions, like randomString(), and nextGaussian(). See the [stats module documentation](https://github.com/jimschubert/nodeload/tree/master/doc/stats.md).\r\n\r\n    var stats = require('nodeload/stats');\r\n    var histogram = new stats.Histogram();\r\n    for (var i = 0; i < 1000; i++) \r\n        histogram.put(Math.abs(Math.floor(stats.nextGaussian())));\r\n    console.log('Mean: ' + histogram.mean() + ', 99%: ' + histogram.percentile(0.99));\r\n\r\nwill output \"`Mean: 0.852, 99%: 3`\".\r\n\r\n### [monitoring](https://github.com/jimschubert/nodeload/tree/master/doc/monitoring.md)\r\n\r\nThe `monitoring` module provides a way to track runtime statistics for code that is run concurrently. See [`test/monitoring.test.js`](https://github.com/jimschubert/nodeload/tree/master/test/monitoring.test.js) for examples or read the [monitoring module documentation](https://github.com/jimschubert/nodeload/tree/master/doc/monitoring.md).\r\n\r\n    var monitoring = require('nodeload/monitoring');\r\n    var monitor = new monitoring.Monitor('runtime');\r\n    function asyncFunction() {\r\n        var m = monitor.start();\r\n        setTimeout(function() { m.end(); }, Math.floor(Math.random()*1000));\r\n    }\r\n    for (var i = 0; i < 1000; i++) { asyncFunction(); }\r\n    process.on('exit', function() {\r\n        console.log('Median runtime (ms): ' + monitor.stats['runtime'].percentile(0.5));\r\n    });\r\n\r\nwill output \"`Median runtime (ms): 497`\".\r\n\r\n### [reporting](https://github.com/jimschubert/nodeload/tree/master/doc/reporting.md)\r\n\r\nThe `reporting` module provides a way to graph values over time and present it in a auto-updating HTML page. See [`test/reporting.test.js`](https://github.com/jimschubert/nodeload/tree/master/test/reporting.test.js) for examples or read the [reporting module documentation](https://github.com/jimschubert/nodeload/tree/master/doc/reporting.md).\r\n\r\n    var reporting = require('nodeload/reporting'), \r\n        stats = require('nodeload/stats'),\r\n        report = reporting.REPORT_MANAGER.addReport('Random Numbers'),\r\n        chart = report.getChart('Gaussian / Pareto vs. Time (minutes)');\r\n    for (var timeout = 0; timeout < 5000; timeout+=500) {\r\n        setTimeout(function() {\r\n                chart.put({\r\n                    'Pareto': stats.nextPareto(0, 100),\r\n                    'Gaussian': stats.nextGaussian()\r\n                });\r\n            }, timeout);\r\n    }\r\n\r\nwill display a graph on http://localhost:8000/ and save it to an HTML file in the local directory.\r\n\r\n### [loop](https://github.com/jimschubert/nodeload/tree/master/doc/loop.md)\r\n\r\nThe `loop` module provides a way to execute a function at a set rate and concurrency. See [`test/loop.test.js`](https://github.com/jimschubert/nodeload/tree/master/test/loop.test.js) for examples or read the [loop module documentation](https://github.com/jimschubert/nodeload/tree/master/doc/loop.md) for details.\r\n\r\n    var http = require('http'),\r\n        loop = require('nodeload/loop'),\r\n        requests = 0,\r\n        client = http.createClient(80, 'www.google.com'),\r\n        l = new loop.MultiLoop({\r\n            fun: function(finished) { \r\n                client.request('GET', '/').end();\r\n                requests++;\r\n                finished();\r\n            },\r\n            rps: 10,\r\n            duration: 3,\r\n            concurrency: 5\r\n        }).start();\r\n    l.on('end', function() { console.log('Total requests: ' + requests) });\r\n\r\nwill output \"`Total requests: 30`\".\r\n\r\n### [http](https://github.com/jimschubert/nodeload/tree/master/doc/http.md)\r\n\r\nThe `http` module provides a generic HTTP server that serves static files and that can be configured with new routes. See [`test/http.test.js`](https://github.com/jimschubert/nodeload/tree/master/test/http.test.js) for examples or read the [http module documentation](https://github.com/jimschubert/nodeload/tree/master/doc/http.md).\r\n\r\n    var http = require('nodeload/http');\r\n    var server = new http.HttpServer().start(10000);\r\n    server.addRoute('^/hello$', function(url, req, res) {\r\n        res.writeHead(200);\r\n        res.end(\"Hello\");\r\n    });\r\n\r\n<http://localhost:8000/package.json> will output the contents of `./package.json`, and <http://localhost:10000/resource> will display \"Hello\".\r\n\r\n\r\nCONTRIBUTING\r\n================\r\nFile bugs on [github](https://github.com/jimschubert/nodeload/issues), email any of the authors, and fork away. [doc/developers.md](https://github.com/jimschubert/nodeload/tree/master/doc/developers.md) has brief instructions on getting tests up and running, and will hold more design details in the future. Contributions are always welcome.\r\n","google":"UA-39257833-1","note":"Don't delete this file! It's used internally to help with page regeneration."}